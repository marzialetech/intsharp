# Compare sharpening vs no sharpening over 10 revolutions
# Uses per-field sharpening control and contour_compare_gif monitor

domain:
  x_min: -0.5
  x_max: 0.5
  n_points_x: 100
  y_min: -0.5
  y_max: 0.5
  n_points_y: 100

time:
  dt: 0.01
  n_steps: 2000   # 10 revolutions at CFL=0.5

velocity: [0.5, 0.0]

fields:
  # Field without sharpening
  - name: alpha_no_sharp
    initial_condition: "0.5 * (1 + tanh((0.15 - r) / 0.02))"
    boundary:
      type: periodic
    sharpening: false
  
  # Field with PM sharpening
  - name: alpha_pm
    initial_condition: "0.5 * (1 + tanh((0.15 - r) / 0.02))"
    boundary:
      type: periodic
    sharpening: true

solver:
  type: upwind

sharpening:
  enabled: false  # Global disabled, per-field overrides
  method: pm
  eps_target: 0.02
  strength: 1.0

output:
  directory: ./results/tanh_circle_10_rev_compare
  monitors:
    - type: console
    - type: contour_compare_gif
      every_n_steps: 200  # 1 frame per revolution
      compare_fields:
        - field: alpha_no_sharp
          contour_levels: [0.5]
          color: blue
          linestyle: "-"
        - field: alpha_pm
          contour_levels: [0.5]
          color: red
          linestyle: "--"
    # Also output individual GIFs for reference
    - type: gif
      every_n_steps: 200
      field: alpha_no_sharp
    - type: gif
      every_n_steps: 200
      field: alpha_pm
