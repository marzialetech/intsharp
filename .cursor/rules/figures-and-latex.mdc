---
description: Figure path and LaTeX build conventions for the interface-sharpening manuscript
globs: ["**/*.tex", "**/*.ipynb", "src/*.py", "notebooks/*.ipynb"]
alwaysApply: false
---

# Repository structure

```
intsharp/
├── src/               # Shared Python utilities
│   ├── __init__.py
│   └── utils.py
├── notebooks/         # Jupyter notebooks
├── manuscript/        # LaTeX manuscript
│   ├── main.tex
│   └── figs/CLPM/     # Figures for manuscript
└── Makefile
```

# Figures and LaTeX workflow

## Figure output from Python/notebooks
- **Save all manuscript figures to** `manuscript/figs/CLPM/` (PDF preferred).
- From notebooks in `notebooks/`, import and use `save_fig`:
  ```python
  import sys; sys.path.insert(0, '..')
  from src.utils import save_fig
  # ...
  save_fig(fig, "your-figure-name.pdf")
  ```
- Naming: match existing style (e.g. `CLPM_*.pdf`, `dissert-*.pdf`).

## Using shared utilities
From any notebook in `notebooks/`:
```python
import sys; sys.path.insert(0, '..')
from src.utils import (
    tanh_hat, tanh_hat_2d, tanh_profile,
    eps_char_from_profile, cassini_phi,
    grad_per, grad_per_2d, crossings_1d,
    make_grid_1d, make_grid_2d, save_fig
)
```

## Including figures in LaTeX
- Use: `\includegraphics[width=\linewidth]{figs/CLPM/filename.pdf}`.
- Theory figures: `2-0theory.tex`. Results figures: `3-0results.tex`.

## Building the PDF
- From **repo root**: run `make pdf`.
- Output: `manuscript/build/main.pdf`. The Makefile opens it after a successful build.
- Run `make clean` to remove build artifacts.

**When the user asks to build:** run the build (e.g. `make pdf`) and **also open the output** (e.g. `open manuscript/build/main.pdf`) so they can see it. The Makefile already does this for `make pdf`; for other builds, run `open <path-to-output>` after success.

## Quick loop
1. Edit and run notebook in `notebooks/`; ensure it saves to `manuscript/figs/CLPM/`.
2. Add or update `\includegraphics{figs/CLPM/...}` in the appropriate `.tex` file.
3. Run `make pdf` (PDF opens automatically).
